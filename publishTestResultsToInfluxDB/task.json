{
    "id": "A040C4F5-DD34-4C34-99D0-88D6B171DC74",
    "name": "PublishTestResultsToInfluxDB",
    "friendlyName": "Publish Test Results to InfluxDB",
    "description": "Takes JUnit test results and publishes them to InfluxDB",
    "helpMarkDown": "",
    "category": "Test",
    "visibility": [
        "Build",
        "Release"
    ],
    "author": "Vodafone",
    "version": {
        "Major": 0,
        "Minor": 1,
        "Patch": 0
    },
    "minimumAgentVersion": "2.0.0",
    "instanceNameFormat": "Publish Test Results to InfluxDB $(testResultsFiles)",
    "groups": [
        {
            "name": "influxdb",
            "displayName": "InfluxDB Details",
            "isExpanded": true
        },
        {
            "name": "advanced",
            "displayName": "Advanced",
            "isExpanded": false
        }
    ],
    "inputs": [
        {
            "name": "testResultFormat",
            "type": "pickList",
            "defaultValue": "JUnit",
            "required": true,
            "helpMarkDown": "Format of test result files generated by your choice of test runner. JUnit currently only supported.",
            "options": {
                "JUnit": "JUnit"
            }
        },
        {
            "name": "testResultsFiles",
            "type": "multiLine",
            "label": "Test results files",
            "defaultValue": "**\\TEST-*.xml",
            "required": true,
            "helpMarkDown": "Test results files path. Supports multiple lines of minimatch patterns. [More Information](https://go.microsoft.com/fwlink/?LinkId=835764)",
            "properties": {
                "rows": "3",
                "resizable": "true"
            }
        },
        {
            "name": "searchFolder",
            "type": "string",
            "label": "Search folder",
            "defaultValue": "$(System.DefaultWorkingDirectory)",
            "required": false,
            "helpMarkDown": "Folder to search for the test result files. Defaults to $(System.DefaultWorkingDirectory)."
        },
        {
            "name": "influxDBHost",
            "type": "string",
            "label": "InfluxDB Host Address",
            "defaultValue": "<influxdbhost>:8086",
            "required": true,
            "helpMarkDown": "InfluxDB Host to send test results data to, including port.",
            "groupName": "influxdb"
        },
        {
            "name": "influxDBSSL",
            "type": "boolean",
            "label": "Use SSL for InfluxDB connection.",
            "defaultValue": "false",
            "required": true,
            "helpMarkDown": "Use SSL to encrypt the data sent to InfluxDB. Your InfluxDB instance must be setup to support this.",
            "groupName": "influxdb"
        },
        {
            "name": "influxDBDatabase",
            "type": "string",
            "label": "InfluxDB Database",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "InfluxDB Database to store results data.",
            "groupName": "influxdb"
        },
        {
            "name": "influxDBUser",
            "type": "string",
            "label": "InfluxDB User",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "InfluxDB User to login with.",
            "groupName": "influxdb"
        },
        {
            "name": "influxDBPassword",
            "type": "string",
            "label": "InfluxDB Password",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "InfluxDB Password",
            "groupName": "influxdb"
        },
        {
            "name": "influxDBDatabase",
            "type": "string",
            "label": "InfluxDB Database",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "InfluxDB Database to store results data.",
            "groupName": "influxdb"
        },
        {
            "name": "createInfluxDBDatabase",
            "type": "boolean",
            "label": "Create InfluxDB database if it doesn't exist",
            "defaultValue": "false",
            "required": true,
            "helpMarkDown": "Attempt to create the InfluxDB specified if it doesn't exist. The user specified must have the rights to create the database.",
            "groupName": "influxdb"
        },
        {
            "name": "testIdentifier",
            "type": "string",
            "label": "Identifier",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Identifier for the data being passed to InfluxDB. Recommend a prefix followed by a build/release id.  For example, 'build $(Build.BuildId)'.",
            "groupName": "influxdb"
        }
    ],
    "execution": {
        "Node": {
            "target": "publishtestresultstoinfluxdb.js",
            "argumentFormat": ""
        }
    },
    "messages": {
        "NoMatchingFilesFound": "No test result files matching '%s' were found.",
        "ErrorTestResultsPublisher": "Error while executing PublishTestResultsToInfluxDB: %s."
    }    
}